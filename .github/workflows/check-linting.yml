name: Lint

on:
    push:
        branches:
            - main
    pull_request:
        branches:
            - main

permissions: {}

jobs:
    build:
        name: lint
        runs-on: ubuntu-latest

        permissions:
            contents: write
            packages: read
            # To report GitHub Actions status checks
            statuses: write

        steps:
            - name: Check out code
              uses: actions/checkout@11bd71901bbe5b1630ceea73d27597364c9af683 #v4.2.2
              with:
                fetch-depth: 0

            - name: Prettify markdown files
              uses: creyD/prettier_action@31355f8eef017f8aeba2e0bc09d8502b13dbbad1 #v4.3.0
              with:
                prettier_options: --write './README.md'
                only_changed: True

            - name: Super-Linter
              uses: super-linter/super-linter@4e8a7c2bf106c4c766c816b35ec612638dc9b6b2 #v7.3.0
              env:
                GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
            - name: Commit and push linting fixes
                # Run only on:
                # - Pull requests
                # - Not on the default branch
              if: >
                github.event_name == 'pull_request' &&
                github.ref_name != github.event.repository.default_branch
              uses: stefanzweifel/git-auto-commit-action@v5
              with:
                branch: ${{ github.event.pull_request.head.ref || github.head_ref || github.ref }}
                commit_message: "chore: fix linting issues"
                commit_user_name: super-linter
                commit_user_email: super-linter@super-linter.dev

